diff -ur VirtualBox-2.2.4_OSE.orig/src/VBox/Additions/linux/export_modules VirtualBox-2.2.4_OSE/src/VBox/Additions/linux/export_modules
--- VirtualBox-2.2.4_OSE.orig/src/VBox/Additions/linux/export_modules	2009-06-20 23:10:03.959703221 +0200
+++ VirtualBox-2.2.4_OSE/src/VBox/Additions/linux/export_modules	2009-06-20 23:39:32.927402856 +0200
@@ -31,6 +31,7 @@
 PATH_ROOT="`cd \`dirname $0\`/../../../..; pwd`"
 PATH_VBOXADD="$PATH_ROOT/src/VBox/Additions/linux/module"
 PATH_VBOXVFS="$PATH_ROOT/src/VBox/Additions/linux/sharedfolders"
+PATH_VBOXVIDEO_DRM="$PATH_ROOT/src/VBox/Additions/linux/drm"
 
 VBOX_VERSION_MAJOR=`sed -e "s/^ *VBOX_VERSION_MAJOR *= \+\([0-9]\+\)/\1/;t;d" $PATH_ROOT/Config.kmk`
 VBOX_VERSION_MINOR=`sed -e "s/^ *VBOX_VERSION_MINOR *= \+\([0-9]\+\)/\1/;t;d" $PATH_ROOT/Config.kmk`
@@ -38,6 +39,7 @@
 
 . $PATH_VBOXADD/files_vboxadd
 . $PATH_VBOXVFS/files_vboxvfs
+. $PATH_VBOXVIDEO_DRM/files_vboxvideo_drm
 
 # Temporary path for creating the modules, will be removed later
 mkdir $PATH_TMP || exit 1
@@ -71,6 +73,15 @@
     install -D -m 0755 `echo $f|cut -d'=' -f1` "$PATH_TMP/vboxvfs/`echo $f|cut -d'>' -f2`"
 done
 
+# vboxvideo_drm (VirtualBox guest kernel module for DRI)
+mkdir $PATH_TMP/vboxvideo_drm || exit 1
+for f in $FILES_VBOXVIDEO_DRM_NOBIN; do
+    install -D -m 0644 `echo $f|cut -d'=' -f1` "$PATH_TMP/vboxvideo_drm/`echo $f|cut -d'>' -f2`"
+done
+for f in $FILES_VBOXVIDEO_DRM_BIN; do
+    install -D -m 0755 `echo $f|cut -d'=' -f1` "$PATH_TMP/vboxvideo_drm/`echo $f|cut -d'>' -f2`"
+done
+
 # Only temporary, omit from archive
 rm $PATH_TMP/version-generated.h
 
--- VirtualBox-3.1.2_OSE/src/VBox/HostDrivers/linux/export_modules.org	2010-01-12 13:08:56.187604615 +0100
+++ VirtualBox-3.1.2_OSE/src/VBox/HostDrivers/linux/export_modules	2010-01-12 13:14:32.244857217 +0100
@@ -36,6 +36,7 @@
 PATH_LINUX="$PATH_ROOT/src/VBox/HostDrivers/linux"
 PATH_VBOXDRV="$PATH_ROOT/src/VBox/HostDrivers/Support"
 PATH_VBOXNET="$PATH_ROOT/src/VBox/HostDrivers/VBoxNetFlt"
+PATH_VBOXADP="$PATH_ROOT/src/VBox/HostDrivers/VBoxNetAdp"
 
 VBOX_VERSION_MAJOR=`sed -e "s/^ *VBOX_VERSION_MAJOR *= \+\([0-9]\+\)/\1/;t;d" $PATH_ROOT/Config.kmk`
 VBOX_VERSION_MINOR=`sed -e "s/^ *VBOX_VERSION_MINOR *= \+\([0-9]\+\)/\1/;t;d" $PATH_ROOT/Config.kmk`
@@ -44,6 +45,7 @@
 
 . $PATH_VBOXDRV/linux/files_vboxdrv
 . $PATH_VBOXNET/linux/files_vboxnetflt
+. $PATH_VBOXADP/linux/files_vboxnetadp
 
 # Temporary path for creating the modules, will be removed later
 mkdir $PATH_TMP || exit 1
@@ -90,6 +92,20 @@
     sed -e "s;-DVBOX_WITH_HARDENING;;g" < $PATH_VBOXNET/linux/Makefile > $PATH_TMP/vboxnetflt/Makefile
 fi
 
+# vboxnetadp (VirtualBox host-only network kernel module)
+mkdir $PATH_TMP/vboxnetadp || exit 1
+for f in $VBOX_VBOXNETADP_SOURCES; do
+    install -D -m 0644 `echo $f|cut -d'=' -f1` "$PATH_TMP/vboxnetadp/`echo $f|cut -d'>' -f2`"
+done
+sed -e "s;_VERSION_;$VBOX_VERSION_STRING;g" < $PATH_LINUX/build_in_tmp > $PATH_TMP/vboxnetadp/build_in_tmp
+chmod 0755 $PATH_TMP/vboxnetadp/build_in_tmp
+sed -e "s;_VERSION_;$VBOX_VERSION_STRING;g" < $PATH_VBOXADP/linux/dkms.conf > $PATH_TMP/vboxnetadp/dkms.conf
+if [ -n "$VBOX_WITH_HARDENING" ]; then
+    cat                                   $PATH_VBOXADP/linux/Makefile > $PATH_TMP/vboxnetadp/Makefile
+else
+    sed -e "s;-DVBOX_WITH_HARDENING;;g" < $PATH_VBOXADP/linux/Makefile > $PATH_TMP/vboxnetadp/Makefile
+fi
+
 install -D -m 0644 $PATH_LINUX/Makefile $PATH_TMP/Makefile
 
 # Only temporary, omit from archive

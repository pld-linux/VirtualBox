Description: Disable "Check for Updates" action.
Bug-Ubuntu: https://bugs.launchpad.net/bugs/272212
Author: Daniel Hahler <ubuntu@thequod.de>, Felix Geyer <debfx-pkg@fobos.de>

diff -Nur virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/globals/VBoxGlobal.cpp virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/globals/VBoxGlobal.cpp
--- virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/globals/VBoxGlobal.cpp	2010-12-17 16:14:24.000000000 +0100
+++ virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/globals/VBoxGlobal.cpp	2011-01-01 23:55:23.240440031 +0100
@@ -4565,6 +4565,9 @@
  */
 void VBoxGlobal::showUpdateDialog (bool aForce)
 {
+    // Updates are handled through package managers.
+    return;
+
     /* Silently check in one day after current time-stamp */
     QTimer::singleShot (24 /* hours */   * 60   /* minutes */ *
                         60 /* seconds */ * 1000 /* milliseconds */,
diff -Nur virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/runtime/UIMachineMenuBar.cpp virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/runtime/UIMachineMenuBar.cpp
--- virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/runtime/UIMachineMenuBar.cpp	2010-11-22 11:05:07.000000000 +0100
+++ virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/runtime/UIMachineMenuBar.cpp	2011-01-01 23:56:55.292774878 +0100
@@ -266,13 +266,6 @@
 #if defined(Q_WS_MAC) && (QT_VERSION < 0x040700)
     if (m_fIsFirstTime)
 # endif
-        pMenu->addAction(pActionsPool->action(UIActionIndex_Simple_Update));
-#ifndef Q_WS_MAC
-    pMenu->addSeparator();
-#endif /* !Q_WS_MAC */
-#if defined(Q_WS_MAC) && (QT_VERSION < 0x040700)
-    if (m_fIsFirstTime)
-# endif
         pMenu->addAction(pActionsPool->action(UIActionIndex_Simple_About));
 
 
diff -Nur virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp
--- virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp	2010-12-17 16:14:24.000000000 +0100
+++ virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp	2011-01-02 00:03:55.120533579 +0100
@@ -501,6 +501,10 @@
 #endif /* !VBOX_WITH_NETFLT */
             break;
         }
+        case GLSettingsPage_Update:
+        {
+            return false;
+        }
         default:
             break;
     }
diff -Nur virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/VBoxHelpActions.cpp virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/VBoxHelpActions.cpp
--- virtualbox-ose-4.0.0-dfsg.orig/src/VBox/Frontends/VirtualBox/src/VBoxHelpActions.cpp	2010-08-13 12:17:07.000000000 +0200
+++ virtualbox-ose-4.0.0-dfsg/src/VBox/Frontends/VirtualBox/src/VBoxHelpActions.cpp	2011-01-02 00:00:00.599195342 +0100
@@ -90,13 +90,6 @@
         GetExtraData (VBoxDefs::GUI_RegistrationDlgWinID).isEmpty());
 #endif
 
-    aMenu->addAction (updateAction);
-    updateAction->setEnabled (vboxGlobal().virtualBox().
-        GetExtraData (VBoxDefs::GUI_UpdateDlgWinID).isEmpty());
-
-#ifndef Q_WS_MAC
-    aMenu->addSeparator();
-#endif /* Q_WS_MAC */
     aMenu->addAction (aboutAction);
 }
 
